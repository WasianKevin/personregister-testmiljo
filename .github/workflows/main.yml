# Namn på pipelinen (syns i GitHub Actions)
name: User GDPR – Build and Test

# När pipelinen ska köras
on:
  push:            # Körs vid push
  pull_request:    # Körs vid pull request

# Jobb som körs
jobs:
  test:
    runs-on: ubuntu-latest   # Körs på Linux

    steps:
      # Steg 1: Ladda ner koden
      - name: Checkout code
        uses: actions/checkout@v3

      # Steg 2: Installera Python
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      # Steg 3: Testa imports och syntax
      - name: Test imports and syntax
        run: |
          # Testar att viktiga moduler går att importera
          python -c "import sqlite3, os; print('All imports successful')"

          # Kontrollerar att app.py inte har syntaxfel
          python -m py_compile app.py

          # Skriver ut att testet lyckades
          echo "Code compilation successful"
